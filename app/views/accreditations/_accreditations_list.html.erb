<% if accreditations.any? %>
  <% unless provider.archived? %>
    <div class="govuk-button-group">
      <%= govuk_button_link_to("Add accreditation", new_accreditation_path(provider_id: provider.id)) %>
    </div>
  <% end %>

  <% accreditation_summary_cards(accreditations, provider, include_actions: !provider.archived?).each do |summary_card| %>
    <%= govuk_summary_card(title: summary_card[:title]) do |card|
          if summary_card[:actions].present?
            summary_card[:actions].each do |action|
              card.with_action { govuk_link_to(action[:text], action[:href]) }
            end
          end
          card.with_summary_list(rows: summary_card[:rows]) do |summary_list|
            if debug_mode? && provider.seed_data_notes.dig("row_imported", "accreditation", "number") == summary_card[:number]
              summary_list.with_row do |row|
                row.with_key(text: "Imported data")

                debug_rows = I18n.t("imported_data.fields.accreditation").filter_map do |field, label|
                  value = provider.seed_data_notes["row_imported"]["accreditation"][field.to_s].present? ? { text: provider.seed_data_notes["row_imported"]["accreditation"][field.to_s] } : not_entered
                  { key: { text: label }, value: value }
                end

                row.with_value(text: govuk_summary_list(rows: debug_rows))
              end
            end
          end
        end %>
  <% end %>
<% else %>
  <% unless provider.archived? %>
    <%= govuk_button_link_to("Add accreditation", new_accreditation_path(provider_id: provider.id)) %>
  <% end %>

  <p class="govuk-body">There are no accreditations for <%= provider.operating_name %></p>
<% end %>
